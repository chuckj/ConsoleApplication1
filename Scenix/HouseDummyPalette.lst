     1                  
     2  07F9  0B7F      DEVICE SX18L, TURBO, STACKX, OSCHS2
     3  =00000002       IRC_CAL IRC_FAST
     4  =02FAF080       FREQ 50_000_000
     5  07FF  0A61      RESET start
     6                  
     7                  
     8  =000000FA       featureSize     equ     5000/20         ;5000 ns / 20 ns (clock time for SX @ 50MHz)
     9                  
    10  =0000000F       modTRIS         equ     $0f
    11  =0000000E       modPULLUP       equ     $0e
    12  =0000000D       modLEVEL        equ     $0d
    13  =0000000C       modSCHMITT      equ     $0c
    14                  
    15  =00000007               org     $07
    16  =00000007       timo    ds      1                       ;time out down counter
    17                  
    18  =00000008       addr    ds      1
    19  =00000009       g       ds      1
    20  =0000000A       b       ds      1
    21  =0000000B       r       ds      1
    22  =0000000C       gx      ds      1       
    23  =0000000D       bx      ds      1
    24  =0000000E       rx      ds      1
    25  =0000000C               org     gx
    26  =0000000C       inten   ds      1
    27  =0000000D       byte    ds      1
    28  =0000000E       bits    ds      1
    29                  
    30  =0000000F       adr0    ds      1
    31  =00000010       adr1    ds      1
    32  =00000011       msk     ds      1
    33                  
    34  =00000012       lupr    ds      1
    35  =00000013       offcur  ds      1
    36  =00000014       offprv  ds      1
    37  =00000015       fade    ds      1
    38                  
    39                  ;randomno       ds      1
    40                  ;randomno0      ds      1
    41  =00000016       wrk             ds      1
    42                  
    43  =00000017       flags           ds      1
    44  =00000017       flgTwinkP       equ     flags.0
    45  =00000017.1     flgTwinkR       equ     flags.1
    46  =00000017.4     flgChaseP       equ     flags.4
    47  =00000017.5     flgChaseR       equ     flags.5
    48  =00000000       mskTwinkP       equ     0 ;;$01
    49  =00000000       mskTwinkR       equ     0 ;;$02
    50  =00000010       mskChaseP       equ     $10
    51  =00000020       mskChaseR       equ     $20
    52                  
    53  =00000018       chasecnt        ds      1
    54  =00000019       chaseval        ds      1
    55                  
    56                  
    57  =00000080       RTCC_ON = %10000000 ;Enables RTCC at address $01 (RTW hi)
    58                  ;*WREG at address $01 (RTW lo) by default
    59  =00000040       RTCC_ID = %01000000 ;Disables RTCC edge interrupt (RTE_IE hi)
    60                  ;*RTCC edge interrupt (RTE_IE lo) enabled by default
    61  =00000020       RTCC_INC_EXT = %00100000 ;Sets RTCC increment on RTCC pin transition (RTS hi)
    62                  ;*RTCC increment on internal instruction (RTS lo)is default
    63  =00000010       RTCC_FE = %00010000 ;Sets RTCC to increment on falling edge (RTE_ES hi)
    64                  ;*RTCC to increment on rising edge (RTE_ES lo) isdefault
    65  =00000000       RTCC_PS_ON = %00000000 ;Assigns prescaler to RTCC (PSA lo)
    66  =00000008       RTCC_PS_OFF = %00001000 ;Assigns prescaler to WDT (PSA hi)
    67  =00000000       PS_000 = %00000000 ;RTCC = 1:2, WDT = 1:1
    68  =00000001       PS_001 = %00000001 ;RTCC = 1:4, WDT = 1:2
    69  =00000002       PS_010 = %00000010 ;RTCC = 1:8, WDT = 1:4
    70  =00000003       PS_011 = %00000011 ;RTCC = 1:16, WDT = 1:8
    71  =00000004       PS_100 = %00000100 ;RTCC = 1:32, WDT = 1:16
    72  =00000005       PS_101 = %00000101 ;RTCC = 1:64, WDT = 1:32
    73  =00000006       PS_110 = %00000110 ;RTCC = 1:128, WDT = 1:64
    74  =00000007       PS_111 = %00000111 ;RTCC = 1:256, WDT = 1:128
    75                  
    76                  
    77  =00000000               org     0
    78  0000  0AF9      xfade   jmp     xfadefar
    79  0001  0B8F      roll    jmp     rollfar
    80                  
    81  =00000002       rollit
    82  0002  0C05              mov     w,#11-6
    83  0003  0028              mov     addr,w
    84  0004  01E4              add     fsr,w
    85  0005  0200              mov     byte,ind
        0006  002D
    86  =00000007       :lup
    87  0007  00E4              dec     fsr
    88  0008  0200              mov     w,ind
    89  0009  02A4              inc     fsr
    90  000A  0020              mov     ind,w
    91  000B  00E4              dec     fsr
    92  000C  02E8              djnz    addr,:lup
        000D  0A07
    93                  
    94  000E  020D              mov     ind,byte
        000F  0020
    95  0010  000C              ret
    96                  
    97  =00000011       send
    98  0011  0208              mov     byte,addr
        0012  002D
    99  0013  092F              call    send6bits
   100  0014  020C              mov     byte,inten
        0015  002D
   101  0016  0934              call    send8bits
   102  0017  020A              mov     byte,b
        0018  002D
   103  0019  092B              call    send4bits
   104  001A  0209              mov     byte,g
        001B  002D
   105  001C  092B              call    send4bits
   106  001D  020B              mov     byte,r
        001E  002D
   107  001F  092B              call    send4bits
   108  0020  0211              or      rb,msk
        0021  0126
   109  0022  0944              call    wait5us
   110  0023  0211              xor     rb,msk
        0024  01A6
   111  0025  0C5A              mov     bits,#30*3
        0026  002E
   112  =00000027       :idle
   113  0027  0944              call    wait5us
   114  0028  02EE              djnz    bits,:idle
        0029  0A27
   115  002A  000C              ret
   116                          
   117  =0000002B       send4bits
   118  002B  0C04              mov     bits,#4
        002C  002E
   119  002D  03AD              swap    byte
   120  002E  0A36              jmp     sendbits
   121                  
   122  =0000002F       send6bits
   123  002F  0C06              mov     bits,#6
        0030  002E
   124  0031  036D              rl      byte
   125  0032  036D              rl      byte
   126  0033  0A36              jmp     sendbits
   127                  
   128  =00000034       send8bits
   129  0034  0C08              mov     bits,#8
        0035  002E
   130                  
   131  =00000036       sendbits
   132  0036  0211              or      RB,msk
        0037  0126
   133  0038  0944              call    wait5us
   134  0039  0211              xor     RB,msk
        003A  01A6
   135  003B  0944              call    wait5us
   136                  
   137  003C  0211              mov     w,msk
   138  003D  036D              rl      byte
   139  003E  0703              sc
   140  003F  0126                or      RB,w
   141  0040  0944              call    wait5us
   142  0041  02EE              djnz    bits,sendbits
        0042  0A36
   143  0043  000C              ret
   144                  
   145  =00000044       wait5us
   146  0044  0C0B              mov     timo,#243/(14+7)
        0045  0027
   147                  
   148  =00000046       :lup
   149  0046  0A47              jmp     $+1
   150  0047  0A48              jmp     $+1
   151  0048  0A49              jmp     $+1
   152  0049  0A4A              jmp     $+1
   153  004A  0A4B              jmp     $+1
   154  004B  0A4C              jmp     $+1
   155  004C  02E7              djnz    timo,:lup
        004D  0A46
   156  004E  000C              ret
   157                  
   158                  ;randomer
   159                  ;       clr     wrk
   160                  ;       snb     randomno.0
   161                  ;         inc   wrk
   162                  ;       snb     randomno.2
   163                  ;         inc   wrk
   164                  ;       snb     randomno.3
   165                  ;         inc   wrk
   166                  ;       snb     randomno.5
   167                  ;         inc   wrk
   168                  ;       rr      wrk
   169                  ;       rr      randomno0
   170                  ;       rr      randomno
   171                  ;       ret
   172                  
   173  =0000004F       wait1ms
   174  004F  0CC8              mov     bits,#200
        0050  002E
   175  =00000051       :lup
   176  0051  0944              call    wait5us
   177  0052  02EE              djnz    bits,:lup
        0053  0A51
   178  0054  000C              ret
   179                  
   180  =00000055       wait33ms
   181  0055  0C21              mov     byte,#33
        0056  002D
   182  0057  0A5D              jmp     waitms
   183                  
   184  =00000058       wait40ms
   185  0058  0C28              mov     byte,#40
        0059  002D
   186  005A  0A5D              jmp     waitms
   187                  
   188  =0000005B       wait100ms
   189  005B  0C64              mov     byte,#100
        005C  002D
   190                  
   191  =0000005D       waitms
   192  005D  094F              call    wait1ms
   193  005E  02ED              djnz    byte,waitms
        005F  0A5D
   194  0060  000C              ret
   195                  
   196                  
   197  =00000061       START
   198  0061  0064              clr     fsr                     ;Clear
   199  =00000062       :clrRAM                                 ;.
   200  0062  0784              sb      fsr.4                   ;.
   201  0063  0564                setb  fsr.3                   ;.
   202  0064  0060              clr     ind                     ;.
   203  0065  03E4              ijnz    fsr,:clrRAM             ;.   all ram
        0066  0A62
   204                  
   205  0067  005F              mode    modTRIS                 ;Setup for direction regs
   206  0068  0CFF              mov     !RA,#%11111111          ;All inputs for RA
        0069  0005
   207  006A  0C00              mov     !RB,#%00000000          ;All outputs for RB
        006B  0006
   208                  
   209  006C  005E              mode    modPULLUP               ;Setup for pull-up regs
   210  006D  0CFF              mov     w,#%11111111            ;All pull-ups DISABLED=1
   211  006E  0005              mov     !RA,w                   ;.   for RA
   212  006F  0006              mov     !RB,w                   ;.   RB
   213                  
   214  0070  005D              mode    modLEVEL                ;Setup for read level regs
   215  0071  0CFF              mov     w,#%11111111            ;All read levels TTL=1
   216  0072  0005              mov     !RA,w                   ;.   for RA
   217  0073  0006              mov     !RB,w                   ;.   RB
   218                  
   219  0074  005C              mode    modSCHMITT              ;Setup for schmitt trigger regs
   220  0075  0CFF              mov     w,#%11111111            ;All schmitt triggers DISABLED=1
   221  0076  0005              mov     !RA,w                   ;.   for RA
   222  0077  0006              mov     !RB,w                   ;.   RB
   223                  
   224  0078  0C00              mov     RA,#%00000000           ;All outputs off RA
        0079  0025
   225  007A  0C00              mov     RB,#%00000000           ;All outputs off for RB
        007B  0026
   226                  
   227                  ;       inc     randomno
   228                  ;
   229                  ;       wait 1.5 seconds for power supplies to all settle...
   230                  ;
   231  =0000007C       waitawhile
   232  007C  0C0F              mov     fade,#15
        007D  0035
   233                  
   234  =0000007E       :waitlup
   235  007E  095B              call    wait100ms
   236  007F  02F5              djnz    fade,:waitlup
        0080  0A7E
   237                  
   238                  
   239                  
   240  0081  0C02              mov     adr0,#S1/256
        0082  002F
   241  0083  0C00              mov     adr1,#S1//256
        0084  0030
   242  0085  0C01              mov     msk,#$01
        0086  0031
   243  0087  099B              call    sendmask
   244                  
   245  0088  0C02              mov     msk,#$02
        0089  0031
   246  008A  099B              call    sendmask
   247                  
   248  008B  0C04              mov     msk,#$04
        008C  0031
   249  008D  099B              call    sendmask
   250                  
   251  008E  0C08              mov     msk,#$08
        008F  0031
   252  0090  099B              call    sendmask
   253                  
   254  0091  0C10              mov     msk,#$10
        0092  0031
   255  0093  099B              call    sendmask
   256                  
   257  0094  0C20              mov     msk,#$20
        0095  0031
   258  0096  099B              call    sendmask
   259                  
   260  0097  0C40              mov     msk,#$40
        0098  0031
   261  0099  099B              call    sendmask
   262  009A  0AAD              jmp             overmask
   263                          
   264  =0000009B       sendmask
   265                  
   266  =0000009B       :lup
   267  009B  020F              mov     m,adr0
        009C  0043
   268  009D  0210              mov     w,adr1
   269                  
   270  009E  0041              iread
   271                  
   272  009F  0028              mov     addr,w
   273                  
   274  00A0  02B0              inc     adr1
   275  00A1  0643              snz
   276  00A2  02AF                inc     adr0
   277                  
   278  00A3  0CFF              csne    addr,#pend
        00A4  0088 0643
   279  00A6  000C                ret
   280                  
   281  00A7  006A              clr     b
   282  00A8  0069              clr     g
   283  00A9  006B              clr     r
   284  00AA  006C              clr     inten
   285                  
   286  00AB  0911              call    send
   287                  
   288  00AC  0A9B              jmp     :lup
   289                  
   290                  
   291  =000000AD       overmask
   292  00AD  0C7E              mov     offprv,#palend
        00AE  0034
   293                  ;
   294                  ;       fade in to new value
   295                  ;
   296  =000000AF       :nxtoff
   297  00AF  0C0F              mov     fade,#15
        00B0  0035
   298  00B1  0077              clr     flags
   299                  
   300  =000000B2       :top
   301  00B2  0010              call    @xfade
        00B3  0900
   302  00B4  09DB              call    sendeach
   303                  
   304  00B5  02F5              djnz    fade,:top
        00B6  0AB2
   305                  
   306  00B7  0010              call    @xfade
        00B8  0900
   307  00B9  09DB              call    sendeach
   308                  
   309                  ;       pickup twink/chase parms
   310                  
   311  00BA  0056              mov     m,#$6
   312  00BB  0213              mov     w,offcur
   313                  
   314  00BC  0041              iread
   315                  
   316  00BD  0037              mov     flags,w
   317                  
   318  00BE  0056              mov     m,#$6
   319  00BF  0C01              mov     w,#1
   320  00C0  01D3              add     w,offcur
   321                  
   322  00C1  0041              iread
   323                  
   324  00C2  0039              mov     chaseval,w
   325                  
   326  00C3  0CC8              mov     lupr,#200       
        00C4  0032
   327  00C5  0219              mov     chasecnt,chaseval
        00C6  0038
   328                  
   329  =000000C7       :ovrfade
   330  00C7  09DB              call    sendeach
   331                  
   332  00C8  0238              test    chasecnt
   333  00C9  0643              jz      :nochase
        00CA  0AD0
   334  00CB  02F8              djnz    chasecnt,:nochase
        00CC  0AD0
   335                  
   336  00CD  0901              call    roll
   337  00CE  0219              mov     chasecnt,chaseval
        00CF  0038
   338                  
   339  =000000D0       :nochase
   340  00D0  02F2              djnz    lupr,:ovrfade
        00D1  0AC7
   341                  
   342  00D2  0213              mov     offprv,offcur
        00D3  0034
   343                  
   344  00D4  0C0E              add     offcur,#14
        00D5  01F3
   345  00D6  0C7E              csb     offcur,#palend
        00D7  0093 0603
   346  00D9  0073                clr     offcur
   347                  
   348  00DA  0AAF              jmp     :nxtoff
   349                  
   350                          
   351  =000000DB       sendeach
   352  00DB  0C7F              mov     msk,#$7f        
        00DC  0031
   353                          
   354  =000000DD       sendall
   355                  ;       call    randomer
   356  00DD  0C01              mov     addr,#p1
        00DE  0028
   357                  
   358  =000000DF       :lup
   359  00DF  0208              mov     fsr,addr
        00E0  0024
   360  00E1  0C30              add     fsr,#$30
        00E2  01E4
   361  00E3  0200              mov     b,ind
        00E4  002A
   362  00E5  0C20              add     fsr,#$20
        00E6  01E4
   363  00E7  0200              mov     g,ind
        00E8  0029
   364  00E9  0C20              add     fsr,#$20
        00EA  01E4
   365  00EB  0200              mov     r,ind
        00EC  002B
   366  00ED  0C20              add     fsr,#$20
        00EE  01E4
   367  00EF  0200              mov     inten,ind
        00F0  002C
   368                  
   369  00F1  0064              clr     fsr
   370                  
   371  =000000F2       :sendit
   372  00F2  0911              call    send
   373                  
   374  00F3  02A8              inc     addr
   375  00F4  0CF3              cjbe    addr,#r6,:lup
        00F5  01C8 0703 0ADF
   376  00F8  000C              ret
   377                  
   378                  
   379  =000000F9       xfadefar
   380  00F9  0C0B              mov     addr,#11
        00FA  0028
   381                  
   382  =000000FB       :lup
   383  00FB  0056              mov     m,#$6
   384  00FC  0C02              mov     w,#2
   385  00FD  01D3              add     w,offcur
   386  00FE  01C8              add     w,addr
   387                  
   388  00FF  0041              iread
   389                  
   390  0100  002A              mov     b,w
   391  0101  0EF0              and     w,#$f0
   392  0102  01AA              xor     b,w
   393  0103  0029              mov     g,w
   394  0104  03A9              swap    g
   395                  
   396  0105  0042              mov     w,m
   397  0106  002B              mov     r,w
   398  0107  0715              sb      fade.0
   399  0108  01CB                add     w,r
   400  0109  036B              rl      r
   401  010A  0735              sb      fade.1
   402  010B  01CB                add     w,r
   403  010C  036B              rl      r
   404  010D  0755              sb      fade.2
   405  010E  01CB                add     w,r
   406  010F  036B              rl      r
   407  0110  0775              sb      fade.3
   408  0111  01CB                add     w,r
   409  0112  002B              mov     r,w
   410                  
   411  0113  0209              mov     w,g
   412  0114  0715              sb      fade.0
   413  0115  01C9                add     w,g
   414  0116  0369              rl      g
   415  0117  0735              sb      fade.1
   416  0118  01C9                add     w,g
   417  0119  0369              rl      g
   418  011A  0755              sb      fade.2
   419  011B  01C9                add     w,g
   420  011C  0369              rl      g
   421  011D  0775              sb      fade.3
   422  011E  01C9                add     w,g
   423  011F  0029              mov     g,w
   424                  
   425  0120  020A              mov     w,b
   426  0121  0715              sb      fade.0
   427  0122  01CA                add     w,b
   428  0123  036A              rl      b
   429  0124  0735              sb      fade.1
   430  0125  01CA                add     w,b
   431  0126  036A              rl      b
   432  0127  0755              sb      fade.2
   433  0128  01CA                add     w,b
   434  0129  036A              rl      b
   435  012A  0775              sb      fade.3
   436  012B  01CA                add     w,b
   437  012C  002A              mov     b,w
   438                  
   439                  
   440                  
   441  012D  0056              mov     m,#$6
   442  012E  0C02              mov     w,#2
   443  012F  01D4              add     w,offprv
   444  0130  01C8              add     w,addr
   445                  
   446  0131  0041              iread
   447                  
   448  0132  002D              mov     bx,w
   449  0133  0EF0              and     w,#$f0
   450  0134  01AD              xor     bx,w
   451  0135  002C              mov     gx,w
   452  0136  03AC              swap    gx
   453  0137  0042              mov     rx,m
        0138  002E
   454                  
   455  0139  0040              clr     w
   456  013A  0615              snb     fade.0
   457  013B  01CE                add     w,rx
   458  013C  036E              rl      rx
   459  013D  0635              snb     fade.1
   460  013E  01CE                add     w,rx
   461  013F  036E              rl      rx
   462  0140  0655              snb     fade.2
   463  0141  01CE                add     w,rx
   464  0142  036E              rl      rx
   465  0143  0675              snb     fade.3
   466  0144  01CE                add     w,rx
   467  0145  01EB              add     r,w
   468                  
   469  0146  0040              clr     w
   470  0147  0615              snb     fade.0
   471  0148  01CC                add     w,gx
   472  0149  036C              rl      gx
   473  014A  0635              snb     fade.1
   474  014B  01CC                add     w,gx
   475  014C  036C              rl      gx
   476  014D  0655              snb     fade.2
   477  014E  01CC                add     w,gx
   478  014F  036C              rl      gx
   479  0150  0675              snb     fade.3
   480  0151  01CC                add     w,gx
   481  0152  01E9              add     g,w
   482                  
   483  0153  0040              clr     w
   484  0154  0615              snb     fade.0
   485  0155  01CD                add     w,bx
   486  0156  036D              rl      bx
   487  0157  0635              snb     fade.1
   488  0158  01CD                add     w,bx
   489  0159  036D              rl      bx
   490  015A  0655              snb     fade.2
   491  015B  01CD                add     w,bx
   492  015C  036D              rl      bx
   493  015D  0675              snb     fade.3
   494  015E  01CD                add     w,bx
   495  015F  01EA              add     b,w
   496                  
   497  0160  0C0F              mov     w,#$0f
   498  0161  03AB              swap    r
   499  0162  016B              and     r,w
   500  0163  03A9              swap    g
   501  0164  0169              and     g,w
   502  0165  03AA              swap    b
   503  0166  016A              and     b,w
   504                  
   505  0167  0208              mov     fsr,addr
        0168  0024
   506  0169  0C31              add     fsr,#$31
        016A  01E4
   507  016B  020A              mov     ind,b
        016C  0020
   508  016D  0C20              add     fsr,#$20
        016E  01E4
   509  016F  0209              mov     ind,g
        0170  0020
   510  0171  0C20              add     fsr,#$20
        0172  01E4
   511  0173  020B              mov     ind,r
        0174  0020
   512                  
   513  0175  0CFF              mov     inten,#$ff
        0176  002C
   514  0177  0C0F              cjne    b,#$0f,:notwht
        0178  008A 0743 0B85
   515  017B  0C0F              cjne    g,#$0f,:notwht
        017C  0089 0743 0B85
   516  017F  0C0F              cjne    r,#$0f,:notwht
        0180  008B 0743 0B85
   517  0183  0CB0              mov     inten,#$b0
        0184  002C
   518                  
   519  =00000185       :notwht
   520  0185  0C20              add     fsr,#$20
        0186  01E4
   521  0187  020C              mov     ind,inten
        0188  0020
   522                  
   523  0189  0064              clr     fsr
   524                          
   525  018A  0228              test    addr
   526  018B  0643              snz     
   527  018C  000C                ret
   528                  
   529  018D  00E8              dec     addr
   530  018E  0AFB              jmp     :lup
   531                  
   532  =0000018F       rollfar
   533  018F  0797              jnb     flgChaseP,:nopost
        0190  0B9D
   534                  
   535  0191  0C31              mov     fsr,#$31
        0192  0024
   536  0193  0902              call    rollit
   537                  
   538  0194  0C51              mov     fsr,#$51
        0195  0024
   539  0196  0902              call    rollit
   540                  
   541  0197  0C71              mov     fsr,#$71
        0198  0024
   542  0199  0902              call    rollit
   543                  
   544  019A  0C91              mov     fsr,#$91
        019B  0024
   545  019C  0902              call    rollit
   546                  
   547  =0000019D       :nopost
   548  019D  07B7              jnb     flgChaseR,:noroof
        019E  0BAB
   549                  
   550  019F  0C37              mov     fsr,#$37
        01A0  0024
   551  01A1  0902              call    rollit
   552                  
   553  01A2  0C57              mov     fsr,#$57
        01A3  0024
   554  01A4  0902              call    rollit
   555                  
   556  01A5  0C77              mov     fsr,#$77
        01A6  0024
   557  01A7  0902              call    rollit
   558                  
   559  01A8  0C97              mov     fsr,#$97
        01A9  0024
   560  01AA  0902              call    rollit
   561                  
   562  =000001AB       :noroof
   563  01AB  0064              clr     fsr
   564  01AC  000C              ret
   565                  
   566                  
   567                          
   568  =00000200               org     $200
   569  =000000FF       pend    equ     255
   570  =00000000       b0      equ     0
   571  =00000001       p1      equ     1
   572  =00000002       p2      equ     2
   573  =00000003       p3      equ     3
   574  =00000004       p4      equ     4
   575  =00000005       p5      equ     5
   576  =00000006       p6      equ     6
   577                  
   578  =00000007       r1      equ     7
   579  =00000008       r2      equ     8
   580  =00000009       r3      equ     9
   581  =0000000A       r4      equ     10
   582  =0000000B       r5      equ     11
   583  =0000000C       r6      equ     12
   584                  
   585  =00000200       S1
   586  0200  0003              dw      p3,p4,p5,p6,p1,p2
        0201  0004 0005 0006 0001
        0205  0002
   587  0206  0003              dw      p3,p4,p5,p6,p1,p2
        0207  0004 0005 0006 0001
        020B  0002
   588  020C  0003              dw      p3,p4,p5,p6,p1,p2
        020D  0004 0005 0006 0001
        0211  0002
   589  0212  0003              dw      p3,p4,p5,p6,p1,p2
        0213  0004 0005 0006 0001
        0217  0002
   590  0218  0003              dw      p3,p4,p5,p6,p1,p2
        0219  0004 0005 0006 0001
        021D  0002
   591  021E  0003              dw      p3,p4,p5,p6,p1,p2
        021F  0004 0005 0006 0001
        0223  0002
   592  0224  0003              dw      p3,p4,p5,p6,p1,p2
        0225  0004 0005 0006 0001
        0229  0002
   593  022A  0003              dw      p3,p4,p5,p6,p1,p2
        022B  0004 0005 0006 0001
        022F  0002
   594  0230  00FF              dw      pend
   595                  
   596  =00000231       S2
   597  0231  0000              dw      b0,b0,b0
        0232  0000 0000
   598  0234  0000              dw      b0,b0,b0,b0,b0,b0
        0235  0000 0000 0000 0000
        0239  0000
   599  023A  0007              dw      r1,r2,r3,r4,r5,r6
        023B  0008 0009 000A 000B
        023F  000C
   600  0240  0007              dw      r1,r2,r3,r4,r5,r6
        0241  0008 0009 000A 000B
        0245  000C
   601  0246  0007              dw      r1,r2,r3,r4,r5,r6
        0247  0008 0009 000A 000B
        024B  000C
   602  024C  0007              dw      r1,r2,r3,r4,r5,r6
        024D  0008 0009 000A 000B
        0251  000C
   603  0252  0007              dw      r1,r2,r3,r4,r5,r6
        0253  0008 0009 000A 000B
        0257  000C
   604  0258  0007              dw      r1,r2,r3,r4,r5,r6
        0259  0008 0009 000A 000B
        025D  000C
   605  025E  0007              dw      r1,r2,r3,r4,r5,r6
        025F  0008 0009 000A 000B
        0263  000C
   606  0264  0007              dw      r1,r2,r3,r4
        0265  0008 0009 000A
   607  0268  00FF              dw      pend
   608                  
   609  =00000269       S3
   610  0269  0001              dw      p1,p2,p3,p4,p5,p6
        026A  0002 0003 0004 0005
        026E  0006
   611  026F  0001              dw      p1,p2,p3
        0270  0002 0003
   612  0272  0007              dw      r1,r2,r3,r4,r5,r6
        0273  0008 0009 000A 000B
        0277  000C
   613  0278  0007              dw      r1,r2,r3,r4,r5,r6
        0279  0008 0009 000A 000B
        027D  000C
   614  027E  0007              dw      r1,r2,r3,r4,r5,r6
        027F  0008 0009 000A 000B
        0283  000C
   615  0284  0007              dw      r1,r2,r3,r4,r5,r6
        0285  0008 0009 000A 000B
        0289  000C
   616  028A  0007              dw      r1,r2,r3,r4,r5,r6
        028B  0008 0009 000A 000B
        028F  000C
   617  0290  0007              dw      r1,r2,r3,r4,r5,r6
        0291  0008 0009 000A 000B
        0295  000C
   618  0296  0007              dw      r1,r2,r3,r4,r5,r6
        0297  0008 0009 000A 000B
        029B  000C
   619  029C  00FF              dw      pend
   620                  
   621  =0000029D       S4
   622  029D  0003              dw      p3,p4,p5,p6,p1,p2
        029E  0004 0005 0006 0001
        02A2  0002
   623  02A3  0003              dw      p3,p4,p5,p6,p1,p2
        02A4  0004 0005 0006 0001
        02A8  0002
   624  02A9  0003              dw      p3,p4,p6,p1,p2
        02AA  0004 0006 0001 0002
   625  02AE  0003              dw      p3,p4,p5,p6,p1,p2
        02AF  0004 0005 0006 0001
        02B3  0002
   626  02B4  0003              dw      p3,p4,p5,p6,p1,p2
        02B5  0004 0005 0006 0001
        02B9  0002
   627  02BA  0000              dw      b0,b0,b0,b0,b0,b0
        02BB  0000 0000 0000 0000
        02BF  0000
   628  02C0  0000              dw      b0,b0
        02C1  0000
   629  02C2  0002              dw      p2,p1,p6,p5,p4,p3
        02C3  0001 0006 0005 0004
        02C7  0003
   630  02C8  0002              dw      p2,p1,p6,p5,p4,p3
        02C9  0001 0006 0005 0004
        02CD  0003
   631  02CE  00FF              dw      pend
   632                  
   633  =000002CF       S5      
   634  02CF  0001              dw      p1,p2,p3,p4,p5,p6
        02D0  0002 0003 0004 0005
        02D4  0006
   635  02D5  0001              dw      p1,p2,p3,p4,p5,p6
        02D6  0002 0003 0004 0005
        02DA  0006
   636  02DB  0001              dw      p1,p2,p3,p4,p5,p6
        02DC  0002 0003 0004 0005
        02E0  0006
   637  02E1  0001              dw      p1,p2,p3,p4,p5,p6
        02E2  0002 0003 0004 0005
        02E6  0006
   638  02E7  0001              dw      p1,p2,p3,p4,p5,p6
        02E8  0002 0003 0004 0005
        02EC  0006
   639  02ED  0001              dw      p1,p2,p3,p4
        02EE  0002 0003 0004
   640  02F1  0006              dw      p6,p5,p4,p3,p2,p1
        02F2  0005 0004 0003 0002
        02F6  0001
   641  02F7  0006              dw      p6,p5,p4,p3,p2,p1
        02F8  0005 0004 0003 0002
        02FC  0001
   642  02FD  00FF              dw      pend
   643                  
   644  =000002FE       S6
   645  02FE  0005              dw      p5,p6,p1,p2,p3,p4
        02FF  0006 0001 0002 0003
        0303  0004
   646  0304  0005              dw      p5,p6,p1,p2,p3,p4
        0305  0006 0001 0002 0003
        0309  0004
   647  030A  000B              dw      r5,r4,r3,r2,r1
        030B  000A 0009 0008 0007
   648  030F  0007              dw      r1,r2,r3,r4,r5,r6
        0310  0008 0009 000A 000B
        0314  000C
   649  0315  0007              dw      r1,r2,r3,r4,r5,r6
        0316  0008 0009 000A 000B
        031A  000C
   650  031B  0007              dw      r1,r2,r3,r4,r5,r6
        031C  0008 0009 000A 000B
        0320  000C
   651  0321  0007              dw      r1,r2,r3,r4,r5,r6
        0322  0008 0009 000A 000B
        0326  000C
   652  0327  0007              dw      r1,r2,r3,r4,r5,r6
        0328  0008 0009 000A 000B
        032C  000C
   653  032D  0007              dw      r1,r2
        032E  0008
   654  032F  00FF              dw      pend
   655                  
   656  =00000330       S7      
   657  0330  0001              dw      p1,p2,p3,p4,p5,p6
        0331  0002 0003 0004 0005
        0335  0006
   658  0336  0001              dw      p1,p2,p3,p4,p5,p6
        0337  0002 0003 0004 0005
        033B  0006
   659  033C  0001              dw      p1,p2,p3,p4,p5,p6
        033D  0002 0003 0004 0005
        0341  0006
   660  0342  0001              dw      p1,p2,p3,p4,p5,p6
        0343  0002 0003 0004 0005
        0347  0006
   661  0348  0001              dw      p1,p2,p3,p4
        0349  0002 0003 0004
   662  034C  0007              dw      r1,r2,r3,r4,r5
        034D  0008 0009 000A 000B
   663  0351  0007              dw      r1,r2,r3,r4,r5,r6
        0352  0008 0009 000A 000B
        0356  000C
   664  0357  0007              dw      r1,r2,r3,r4,r5,r6
        0358  0008 0009 000A 000B
        035C  000C
   665  035D  00FF              dw      pend
   666                  
   667                          
   668                  
   669  =00000600               org     $600
   670                  
   671  =00000600       palettes
   672  0600  0010              dw      mskChaseP+mskTwinkR,90
        0601  005A
   673  0602  000F              dw      $00f,$0ff,$0f0,$ff0,$f00,$f0f
        0603  00FF 00F0 0FF0 0F00
        0607  0F0F
   674  0608  0FFF              dw      $fff,$fff,$fff,$fff,$fff,$fff
        0609  0FFF 0FFF 0FFF 0FFF
        060D  0FFF
   675                  
   676  060E  0000              dw      0,0
        060F  0000
   677  0610  0F00              dw      $f00,$f00,$f00,$f00,$f00,$f00
        0611  0F00 0F00 0F00 0F00
        0615  0F00
   678  0616  0F00              dw      $f00,$f00,$f00,$f00,$f00,$f00
        0617  0F00 0F00 0F00 0F00
        061B  0F00
   679                  
   680  061C  0003              dw      3,0
        061D  0000
   681  061E  0F00              dw      $f00,$f00,$f00,$0f0,$0f0,$0f0
        061F  0F00 0F00 00F0 00F0
        0623  00F0
   682  0624  0FFF              dw      $fff,$fff,$fff,$fff,$fff,$fff
        0625  0FFF 0FFF 0FFF 0FFF
        0629  0FFF
   683                  
   684  062A  0010              dw      mskChaseP+mskTwinkR,60
        062B  003C
   685  062C  0FFF              dw      $fff,$f00,$f00,$fff,$f00,$f00
        062D  0F00 0F00 0FFF 0F00
        0631  0F00
   686  0632  0F00              dw      $f00,$f00,$f00,$f00,$f00,$f00
        0633  0F00 0F00 0F00 0F00
        0637  0F00
   687                  
   688  0638  0000              dw      0,0
        0639  0000
   689  063A  00F0              dw      $0f0,$0f0,$0f0,$0f0,$0f0,$0f0
        063B  00F0 00F0 00F0 00F0
        063F  00F0
   690  0640  0F00              dw      $f00,$f00,$f00,$f00,$f00,$f00
        0641  0F00 0F00 0F00 0F00
        0645  0F00
   691                  
   692  0646  0010              dw      mskChaseP+mskTwinkR,0
        0647  0000
   693  0648  000F              dw      $00f,$0ff,$0f0,$ff0,$f00,$f0f
        0649  00FF 00F0 0FF0 0F00
        064D  0F0F
   694  064E  0F00              dw      $f00,$f00,$f00,$f00,$f00,$f00
        064F  0F00 0F00 0F00 0F00
        0653  0F00
   695                  
   696  0654  0010              dw      mskChaseP+mskTwinkR,60
        0655  003C
   697  0656  0FFF              dw      $fff,$0f0,$0f0,$fff,$0f0,$0f0
        0657  00F0 00F0 0FFF 00F0
        065B  00F0
   698  065C  00F0              dw      $0f0,$0f0,$0f0,$0f0,$0f0,$0f0
        065D  00F0 00F0 00F0 00F0
        0661  00F0
   699                  
   700  0662  0020              dw      mskChaseR+mskTwinkR,0
        0663  0000
   701  0664  0000              dw      $000,$000,$000,$000,$000,$000
        0665  0000 0000 0000 0000
        0669  0000
   702  066A  000F              dw      $00f,$0ff,$0f0,$ff0,$f00,$f0f
        066B  00FF 00F0 0FF0 0F00
        066F  0F0F
   703                  
   704  0670  0010              dw      mskChaseP+mskTwinkR,60
        0671  003C
   705  0672  0FFF              dw      $fff,$fff,$00f,$00f,$00f,$00f
        0673  0FFF 000F 000F 000F
        0677  000F
   706  0678  000F              dw      $00f,$00f,$00f,$00f,$00f,$00f
        0679  000F 000F 000F 000F
        067D  000F
   707                  
   708  =0000007E       palend  equ     $-palettes
   709  067E  0000              dw      0,60
        067F  003C
   710  0680  0000              dw      $000,$000,$000,$000,$000,$000
        0681  0000 0000 0000 0000
        0685  0000
   711  0686  0000              dw      $000,$000,$000,$000,$000,$000
        0687  0000 0000 0000 0000
        068B  0000
   712                  
   713                          end START

Cross Reference
119 symbols

Symbol                            Type   Value      Line
__SASM                            DATA   00000001   0000
__SX_FREQ                         DATA   02FAF080   0004
__SX_IRC_CAL                      DATA   00000002   0003
__SX_RESET                        RESB   00000A61   0005
addr                              MEMV   00000008   0018
adr0                              MEMV   0000000F   0030
adr1                              MEMV   00000010   0031
b                                 MEMV   0000000A   0020
b0                                DATA   00000000   0570
bits                              MEMV   0000000E   0028
bx                                MEMV   0000000D   0023
byte                              MEMV   0000000D   0027
chasecnt                          MEMV   00000018   0053
chaseval                          MEMV   00000019   0054
fade                              MEMV   00000015   0037
featureSize                       DATA   000000FA   0008
flags                             MEMV   00000017   0043
flgChaseP                         DATA   00000017.4 0046
flgChaseR                         DATA   00000017.5 0047
flgTwinkP                         DATA   00000017   0044
flgTwinkR                         DATA   00000017.1 0045
fsr                               RESV   00000004   0084
g                                 MEMV   00000009   0019
gx                                MEMV   0000000C   0022
ind                               RESV   00000000   0085
inten                             MEMV   0000000C   0026
lupr                              MEMV   00000012   0034
modLEVEL                          DATA   0000000D   0012
modPULLUP                         DATA   0000000E   0011
modSCHMITT                        DATA   0000000C   0013
modTRIS                           DATA   0000000F   0010
msk                               MEMV   00000011   0032
mskChaseP                         DATA   00000010   0050
mskChaseR                         DATA   00000020   0051
mskTwinkP                         DATA   00000000   0048
mskTwinkR                         DATA   00000000   0049
offcur                            MEMV   00000013   0035
offprv                            MEMV   00000014   0036
overmask                          ADDR   000000AD   0291
overmask:nochase                  ADDR   000000D0   0339
overmask:nxtoff                   ADDR   000000AF   0296
overmask:ovrfade                  ADDR   000000C7   0329
overmask:top                      ADDR   000000B2   0300
p1                                DATA   00000001   0571
p2                                DATA   00000002   0572
p3                                DATA   00000003   0573
p4                                DATA   00000004   0574
p5                                DATA   00000005   0575
p6                                DATA   00000006   0576
palend                            DATA   0000007E   0708
palettes                          ADDR   00000600   0671
pend                              DATA   000000FF   0569
PS_000                             VAR   00000000   0067
PS_001                             VAR   00000001   0068
PS_010                             VAR   00000002   0069
PS_011                             VAR   00000003   0070
PS_100                             VAR   00000004   0071
PS_101                             VAR   00000005   0072
PS_110                             VAR   00000006   0073
PS_111                             VAR   00000007   0074
r                                 MEMV   0000000B   0021
r1                                DATA   00000007   0578
r2                                DATA   00000008   0579
r3                                DATA   00000009   0580
r4                                DATA   0000000A   0581
r5                                DATA   0000000B   0582
r6                                DATA   0000000C   0583
RA                                RESV   00000005   0224
rb                                RESV   00000006   0108
roll                              ADDR   00000001   0079
rollfar                           ADDR   0000018F   0532
rollfar:nopost                    ADDR   0000019D   0547
rollfar:noroof                    ADDR   000001AB   0562
rollit                            ADDR   00000002   0081
rollit:lup                        ADDR   00000007   0086
RTCC_FE                            VAR   00000010   0063
RTCC_ID                            VAR   00000040   0059
RTCC_INC_EXT                       VAR   00000020   0061
RTCC_ON                            VAR   00000080   0057
RTCC_PS_OFF                        VAR   00000008   0066
RTCC_PS_ON                         VAR   00000000   0065
rx                                MEMV   0000000E   0024
S1                                ADDR   00000200   0585
S2                                ADDR   00000231   0596
S3                                ADDR   00000269   0609
S4                                ADDR   0000029D   0621
S5                                ADDR   000002CF   0633
S6                                ADDR   000002FE   0644
S7                                ADDR   00000330   0656
send                              ADDR   00000011   0097
send4bits                         ADDR   0000002B   0117
send6bits                         ADDR   0000002F   0122
send8bits                         ADDR   00000034   0128
send:idle                         ADDR   00000027   0112
sendall                           ADDR   000000DD   0354
sendall:lup                       ADDR   000000DF   0358
sendall:sendit                    ADDR   000000F2   0371
sendbits                          ADDR   00000036   0131
sendeach                          ADDR   000000DB   0351
sendmask                          ADDR   0000009B   0264
sendmask:lup                      ADDR   0000009B   0266
START                             ADDR   00000061   0197
START:clrRAM                      ADDR   00000062   0199
timo                              MEMV   00000007   0016
wait100ms                         ADDR   0000005B   0188
wait1ms                           ADDR   0000004F   0173
wait1ms:lup                       ADDR   00000051   0175
wait33ms                          ADDR   00000055   0180
wait40ms                          ADDR   00000058   0184
wait5us                           ADDR   00000044   0145
wait5us:lup                       ADDR   00000046   0148
waitawhile                        ADDR   0000007C   0231
waitawhile:waitlup                ADDR   0000007E   0234
waitms                            ADDR   0000005D   0191
wrk                               MEMV   00000016   0041
xfade                             ADDR   00000000   0078
xfadefar                          ADDR   000000F9   0379
xfadefar:lup                      ADDR   000000FB   0382
xfadefar:notwht                   ADDR   00000185   0519
